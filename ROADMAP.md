# ROADMAP

Документ описывает план развития расширения `marketplace-api-checker` (1С:Предприятие 8.3) на ближайшие релизы.

## Цели проекта

- Стабильная и предсказуемая отправка запросов в сервис НОПи.
- Удобный сценарий поиска для пользователя в интерфейсе 1С.
- Прозрачная история взаимодействий и диагностика ошибок.
- Готовность к эксплуатации в нескольких базах и средах.

## Текущий статус (v0.0.1)

Реализовано:

- перехват глобального поиска и открытие формы `НОП_ФормаПоиска`;
- полнотекстовый поиск с пагинацией и историей последних запросов;
- отправка команд `нопик, ...` в HTTP-сервис НОПи;
- сохранение истории обращений в регистр `НОП_ИсторияВзаимодействияНопик`.

Ограничения текущей версии:

- нет явных таймаутов/повторных попыток HTTP;
- нет структурированной классификации ошибок и статусов доставки;
- нет автотестов и автоматизированной проверки качества;
- нет формализованного процесса релизов.

## План по релизам

## v0.1 — Надежность интеграции

Фокус: минимизировать потери запросов и упростить диагностику инцидентов.

Ключевые задачи:

- Ввести настройки HTTP: таймаут, базовый retry (например, до 2 повторов), интервал между повторами.
- Добавить в историю взаимодействий статус отправки (`Успех`, `Ошибка`, `ПовторнаяОтправка`).
- Логировать код ответа и текст ошибки в безопасном виде.
- Разделить пользовательские сообщения и технические логи (без лишних деталей для конечного пользователя).

Критерии готовности:

- При кратковременных сетевых сбоях запрос не теряется в типовых сценариях.
- Пользователь получает понятное сообщение о результате отправки.
- Администратор может восстановить картину инцидента по регистру и журналу.

## v0.2 — Наблюдаемость и администрирование

Фокус: дать администратору инструменты контроля и обслуживания.

Ключевые задачи:

- Добавить отдельную форму просмотра истории с фильтрами по периоду/статусу.
- Реализовать команду повторной отправки неуспешных обращений.
- Добавить сервисную обработку очистки/архивации истории за период.
- Вынести параметры интеграции (адрес, таймаут, retry) в понятные настройки.

Критерии готовности:

- Администратор без доработок кода может контролировать качество доставки.
- Операционные действия (повтор, очистка) выполняются через UI.

## v0.3 — Улучшение UX поиска

Фокус: повысить скорость работы пользователя с формой поиска.

Ключевые задачи:

- Улучшить подсказки в форме: примеры команд и быстрый старт.
- Добавить явное разделение сценариев: локальный поиск vs отправка в НОПи.
- Оптимизировать навигацию по результатам и переход к объектам.
- Добавить защиту от случайной отправки пустых/служебных запросов.

Критерии готовности:

- Новому пользователю достаточно 1–2 минут, чтобы понять базовые сценарии.
- Количество ошибочных отправок заметно снижается.

## v0.4 — Инженерная зрелость

Фокус: упростить сопровождение и выпуск новых версий.

Ключевые задачи:

- Подготовить набор smoke-сценариев для ручной регрессии.
- Формализовать changelog и шаблон релиз-нотов.
- Добавить проверочный чеклист перед публикацией версии.
- Зафиксировать правила версионирования и обратной совместимости.

Критерии готовности:

- Релизы выпускаются по повторяемому процессу.
- Снижается риск регрессий в основных пользовательских сценариях.

## Нефункциональные инициативы (сквозные)

- **Безопасность:** не хранить чувствительные данные в открытом виде, ограничивать диагностические сообщения.
- **Производительность:** удерживать отклик формы поиска комфортным при росте объема данных.
- **Поддерживаемость:** упрощать код модулей и устранять дублирование служебных процедур.
- **Совместимость:** проверять работу в целевых режимах платформы 1С (управляемое приложение).

## Риски и зависимости

- Доступность и SLA внешнего сервиса НОПи.
- Ограничения инфраструктуры клиента (прокси, firewall, нестабильная сеть).
- Отличия в окружениях (тест/прод) и политиках безопасности ИБ.

## Предложенный порядок работ

1. Сначала закрыть надежность отправки (`v0.1`), иначе дальнейшие UX-улучшения не дадут ожидаемой ценности.
2. Затем добавить инструменты администрирования (`v0.2`) для управляемой эксплуатации.
3. После стабилизации потока обращений перейти к UX (`v0.3`).
4. Параллельно закрепить релизный процесс и контроль качества (`v0.4`).

## Definition of Done для задач roadmap

Задача считается завершенной, если:

- обновлена пользовательская или техническая документация (при необходимости);
- внесены изменения в метаданные/модули расширения и проведена проверка сценария;
- добавлена запись в changelog релиза;
- зафиксированы ограничения и известные компромиссы.